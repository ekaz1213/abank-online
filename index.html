<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê –ë–ê–ù–ö</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .app {
            width: 100%;
            max-width: 500px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 25px 20px;
            text-align: center;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .content {
            padding: 20px;
            max-height: 600px;
            overflow-y: auto;
        }
        .card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
        }
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            margin-bottom: 12px;
            font-size: 16px;
        }
        button {
            width: 100%;
            background: #667eea;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-bottom: 8px;
        }
        .btn-secondary {
            background: #6c757d;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-warning {
            background: #ffc107;
            color: black;
        }
        .balance {
            font-size: 28px;
            font-weight: bold;
            color: #2d3748;
            margin: 8px 0;
        }
        .nav {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            margin-top: 15px;
        }
        .nav-btn {
            background: white;
            border: 2px solid #e1e5e9;
            padding: 12px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
            color: #2d3748; /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
        }
        .operation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid #667eea;
        }
        .badge {
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 8px;
        }
        .hidden {
            display: none;
        }
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }
        .tab {
            flex: 1;
            padding: 10px;
            text-align: center;
            background: #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            color: #2d3748; /* –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ */
        }
        .tab.active {
            background: #667eea;
            color: white;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 15px;
            width: 90%;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <div class="logo">–ê –ë–ê–ù–ö</div>
            <div>–ü—Ä–µ–º–∏—É–º –±–∞–Ω–∫–∏–Ω–≥</div>
        </div>
        
        <div class="content">
            <!-- –õ–æ–≥–∏–Ω -->
            <div id="loginView">
                <div class="card">
                    <h3>–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
                    <input type="email" id="loginEmail" placeholder="Email" value="admin@abank.ru">
                    <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" value="Admin123!">
                    <button onclick="login()">–í–æ–π—Ç–∏</button>
                    <button class="btn-secondary" onclick="showView('register')">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
                </div>
            </div>

            <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
            <div id="registerView" class="hidden">
                <div class="card">
                    <h3>–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è <span class="badge">+1000‚ÇΩ</span></h3>
                    <input type="text" id="regName" placeholder="–ò–º—è">
                    <input type="text" id="regLastName" placeholder="–§–∞–º–∏–ª–∏—è">
                    <input type="email" id="regEmail" placeholder="Email">
                    <input type="tel" id="regPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
                    <input type="password" id="regPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                    <button onclick="register()">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç +1000‚ÇΩ</button>
                    <button class="btn-secondary" onclick="showView('login')">–ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –î–∞—à–±–æ—Ä–¥ -->
            <div id="dashboardView" class="hidden">
                <div class="card">
                    <h3 id="userWelcome">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h3>
                    <div class="balance" id="userBalance">0 ‚ÇΩ</div>
                    
                    <div class="nav">
                        <div class="nav-btn" onclick="showView('transfer')">üí∏ –ü–µ—Ä–µ–≤–æ–¥</div>
                        <div class="nav-btn" onclick="applyCard()">üí≥ –ö–∞—Ä—Ç–∞</div>
                        <div class="nav-btn" onclick="showView('history')">üìä –ò—Å—Ç–æ—Ä–∏—è</div>
                        <div class="nav-btn" onclick="showView('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
                        <div class="nav-btn" onclick="showView('invest')">üìà –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</div>
                        <div class="nav-btn" onclick="showView('admin')" id="adminNav">üëë –ê–¥–º–∏–Ω</div>
                    </div>
                </div>
                
                <div class="card">
                    <h4>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h4>
                    <div id="recentOperations">–û–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>
                </div>
                
                <button class="btn-secondary" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>

            <!-- –ü–µ—Ä–µ–≤–æ–¥—ã -->
            <div id="transferView" class="hidden">
                <div class="card">
                    <h3>–ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3>
                    
                    <div class="tabs">
                        <div class="tab active" onclick="setTransferType('email')">üìß Email</div>
                        <div class="tab" onclick="setTransferType('phone')">üì± –¢–µ–ª–µ—Ñ–æ–Ω</div>
                        <div class="tab" onclick="setTransferType('card')">üí≥ –ö–∞—Ä—Ç–∞</div>
                    </div>
                    
                    <input type="text" id="transferTo" placeholder="–ü–æ–ª—É—á–∞—Ç–µ–ª—å">
                    <input type="number" id="transferAmount" placeholder="–°—É–º–º–∞">
                    <input type="text" id="transferDesc" placeholder="–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ">
                    <button onclick="makeTransfer()">–ü–µ—Ä–µ–≤–µ—Å—Ç–∏</button>
                    <button class="btn-secondary" onclick="showView('dashboard')">–ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è -->
            <div id="historyView" class="hidden">
                <div class="card">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
                    <div id="operationsList">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <button class="btn-secondary" onclick="showView('dashboard')">–ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div id="profileView" class="hidden">
                <div class="card">
                    <h3>–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <div id="profileInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <button onclick="showPassportModal()">üÜî –ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</button>
                    <button class="btn-success" onclick="requestVerification()" id="verifyBtn">‚úÖ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é</button>
                    <button class="btn-secondary" onclick="showView('dashboard')">–ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ -->
            <div id="investView" class="hidden">
                <div class="card">
                    <h3>–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏</h3>
                    <div class="balance" id="investBalance">0 ‚ÇΩ</div>
                    
                    <div class="nav">
                        <div class="nav-btn" onclick="buyStock('AAPL')">üçé Apple</div>
                        <div class="nav-btn" onclick="buyStock('TSLA')">üöó Tesla</div>
                        <div class="nav-btn" onclick="buyCrypto('BTC')">‚Çø Bitcoin</div>
                        <div class="nav-btn" onclick="buyCrypto('ETH')">Œû Ethereum</div>
                    </div>
                    
                    <button class="btn-secondary" onclick="showView('dashboard')">–ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ê–¥–º–∏–Ω -->
            <div id="adminView" class="hidden">
                <div class="card">
                    <h3>–ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
                    <div id="adminStats">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <button onclick="loadUsers()">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</button>
                    <button class="btn-warning" onclick="resetDB()">–°–±—Ä–æ—Å –±–∞–∑—ã</button>
                    <button class="btn-secondary" onclick="showView('dashboard')">–ù–∞–∑–∞–¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–∞—Å–ø–æ—Ä—Ç–∞ -->
    <div class="modal" id="passportModal">
        <div class="modal-content">
            <h3>–ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
            <input type="text" id="passportSeries" placeholder="–°–µ—Ä–∏—è" maxlength="4">
            <input type="text" id="passportNumber" placeholder="–ù–æ–º–µ—Ä" maxlength="6">
            <input type="text" id="passportIssued" placeholder="–ö–µ–º –≤—ã–¥–∞–Ω">
            <input type="text" id="passportCode" placeholder="–ö–æ–¥ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è">
            <div style="display: flex; gap: 10px;">
                <button onclick="savePassport()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn-secondary" onclick="closeModal('passportModal')">–û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨–Æ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        let users = JSON.parse(localStorage.getItem('abank_users')) || JSON.parse(localStorage.getItem('bank_users')) || [];
        let operations = JSON.parse(localStorage.getItem('abank_operations')) || JSON.parse(localStorage.getItem('bank_operations')) || [];
        let currentUser = null;
        let transferType = 'email';

        // –°–æ–∑–¥–∞–µ–º –∞–¥–º–∏–Ω–∞ –µ—Å–ª–∏ –Ω–µ—Ç
        if (!users.find(u => u.email === 'admin@abank.ru')) {
            users.push({
                id: 'admin',
                name: '–ê–¥–º–∏–Ω', lastName: '–°–∏—Å—Ç–µ–º—ã',
                email: 'admin@abank.ru', phone: '+79990000000',
                password: 'Admin123!', balance: 100000,
                role: 'admin', cards: [], verified: true,
                passport: {series: '0000', number: '000000'},
                investments: [], crypto: []
            });
            saveData();
        }

        function saveData() {
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –æ–±–∞ –∫–ª—é—á–∞ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
            localStorage.setItem('abank_users', JSON.stringify(users));
            localStorage.setItem('abank_operations', JSON.stringify(operations));
            localStorage.setItem('bank_users', JSON.stringify(users));
            localStorage.setItem('bank_operations', JSON.stringify(operations));
        }

        function showView(viewName) {
            document.querySelectorAll('[id$="View"]').forEach(view => {
                view.classList.add('hidden');
            });
            document.getElementById(viewName + 'View').classList.remove('hidden');
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è view
            if (viewName === 'dashboard') loadDashboard();
            if (viewName === 'history') loadHistory();
            if (viewName === 'profile') loadProfile();
            if (viewName === 'admin') loadAdmin();
        }

        function showModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // –õ–æ–≥–∏–Ω –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                updateUI();
                showView('dashboard');
            } else alert('–ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
        }

        function register() {
            const userData = {
                name: document.getElementById('regName').value,
                lastName: document.getElementById('regLastName').value,
                email: document.getElementById('regEmail').value,
                phone: document.getElementById('regPhone').value,
                password: document.getElementById('regPassword').value
            };
            
            if (users.find(u => u.email === userData.email)) {
                alert('Email —É–∂–µ –∑–∞–Ω—è—Ç'); return;
            }
            
            const newUser = {
                id: 'user_' + Date.now(), ...userData,
                balance: 1000, role: 'user', cards: [],
                verified: false, passport: null,
                investments: [], crypto: []
            };
            
            users.push(newUser);
            currentUser = newUser;
            
            // –ë–æ–Ω—É—Å–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è
            operations.push({
                id: 'op_' + Date.now(), type: 'bonus',
                userId: newUser.id, amount: 1000,
                description: '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–π –±–æ–Ω—É—Å',
                at: new Date().toISOString()
            });
            
            saveData();
            updateUI();
            showView('dashboard');
            alert('–ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω! –ë–æ–Ω—É—Å 1000 ‚ÇΩ');
        }

        // –ü–µ—Ä–µ–≤–æ–¥—ã
        function setTransferType(type) {
            transferType = type;
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const placeholder = {
                'email': 'Email –ø–æ–ª—É—á–∞—Ç–µ–ª—è',
                'phone': '–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è', 
                'card': '–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã'
            }[type];
            document.getElementById('transferTo').placeholder = placeholder;
        }

        function makeTransfer() {
            const to = document.getElementById('transferTo').value;
            const amount = Number(document.getElementById('transferAmount').value);
            const desc = document.getElementById('transferDesc').value;
            
            let recipient = users.find(u => 
                u.email === to || u.phone === to || 
                u.cards.some(c => c.number.includes(to))
            );
            
            if (!recipient) { alert('–ü–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω'); return; }
            if (currentUser.balance < amount) { alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤'); return; }
            
            currentUser.balance -= amount;
            recipient.balance += amount;
            
            operations.push({
                id: 'op_' + Date.now(), type: 'transfer',
                fromId: currentUser.id, toId: recipient.id,
                amount: amount, description: desc,
                at: new Date().toISOString()
            });
            
            saveData();
            updateUI();
            showView('dashboard');
            alert(`–ü–µ—Ä–µ–≤–æ–¥ ${amount} ‚ÇΩ –≤—ã–ø–æ–ª–Ω–µ–Ω!`);
        }

        // –ö–∞—Ä—Ç—ã
        function applyCard() {
            if (!currentUser.passport) {
                alert('–ù—É–∂–Ω—ã –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'); showView('profile'); return;
            }
            if (!currentUser.verified) {
                alert('–¢—Ä–µ–±—É–µ—Ç—Å—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è'); return;
            }
            
            const cardNumber = '5536 ' + Math.floor(1000 + Math.random() * 9000);
            currentUser.cards.push({
                number: cardNumber, type: 'Visa Classic',
                issuedAt: new Date().toISOString()
            });
            
            operations.push({
                id: 'op_' + Date.now(), type: 'card_issue',
                userId: currentUser.id, amount: 0,
                description: '–í—ã–ø—É—Å–∫ –∫–∞—Ä—Ç—ã',
                at: new Date().toISOString()
            });
            
            saveData();
            alert(`–ö–∞—Ä—Ç–∞ –≤—ã–ø—É—â–µ–Ω–∞: ${cardNumber}`);
        }

        // –ü–∞—Å–ø–æ—Ä—Ç –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
        function showPassportModal() {
            showModal('passportModal');
        }

        function savePassport() {
            const passportData = {
                series: document.getElementById('passportSeries').value,
                number: document.getElementById('passportNumber').value,
                issued: document.getElementById('passportIssued').value,
                code: document.getElementById('passportCode').value
            };
            
            if (!passportData.series || !passportData.number) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–µ—Ä–∏—é –∏ –Ω–æ–º–µ—Ä'); return;
            }
            
            currentUser.passport = passportData;
            saveData();
            closeModal('passportModal');
            loadProfile();
            alert('–ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã');
        }

        function requestVerification() {
            if (!currentUser.passport) {
                alert('–°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Å–ø–æ—Ä—Ç'); return;
            }
            alert('–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω—É');
        }

        // –ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏
        function buyStock(symbol) {
            const prices = { AAPL: 15000, TSLA: 18000 };
            const price = prices[symbol];
            
            if (currentUser.balance >= price) {
                currentUser.balance -= price;
                if (!currentUser.investments) currentUser.investments = [];
                currentUser.investments.push({ symbol, price, date: new Date() });
                saveData();
                updateUI();
                alert(`–ö—É–ø–ª–µ–Ω—ã –∞–∫—Ü–∏–∏ ${symbol} –∑–∞ ${price} ‚ÇΩ`);
            } else alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
        }

        function buyCrypto(coin) {
            const prices = { BTC: 3500000, ETH: 250000 };
            const price = prices[coin];
            
            if (currentUser.balance >= price) {
                currentUser.balance -= price;
                if (!currentUser.crypto) currentUser.crypto = [];
                currentUser.crypto.push({ coin, price, date: new Date() });
                saveData();
                updateUI();
                alert(`–ö—É–ø–ª–µ–Ω–∞ –∫—Ä–∏–ø—Ç–∞ ${coin} –∑–∞ ${price} ‚ÇΩ`);
            } else alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
        }

        // –ê–¥–º–∏–Ω —Ñ—É–Ω–∫—Ü–∏–∏
        function loadAdmin() {
            const stats = `
                <div class="operation">
                    <div>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</div><div>${users.length}</div>
                </div>
                <div class="operation">
                    <div>–í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã:</div><div>${users.filter(u => u.verified).length}</div>
                </div>
                <div class="operation">
                    <div>–û–±—â–∏–π –±–∞–ª–∞–Ω—Å:</div><div>${users.reduce((sum, u) => sum + u.balance, 0)} ‚ÇΩ</div>
                </div>
            `;
            document.getElementById('adminStats').innerHTML = stats;
        }

        function loadUsers() {
            let html = '<h4>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:</h4>';
            users.forEach(user => {
                html += `
                <div class="operation">
                    <div>
                        ${user.name} ${user.lastName}
                        ${user.role === 'admin' ? '<span class="badge">ADMIN</span>' : ''}
                        ${user.verified ? '<span class="badge">VERIFIED</span>' : ''}
                    </div>
                    <div>${user.balance} ‚ÇΩ</div>
                </div>`;
            });
            document.getElementById('adminStats').innerHTML = html;
        }

        function verifyUser(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                user.verified = true;
                saveData();
                loadUsers();
                alert(`${user.name} –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω`);
            }
        }

        function makeAdmin(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                user.role = 'admin';
                saveData();
                loadUsers();
                alert(`${user.name} —Ç–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω`);
            }
        }

        function resetDB() {
            if (confirm('–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö?')) {
                localStorage.clear();
                location.reload();
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function loadDashboard() {
            const userOps = operations.filter(op => 
                op.userId === currentUser.id || op.fromId === currentUser.id
            ).slice(-3).reverse();
            
            const container = document.getElementById('recentOperations');
            container.innerHTML = userOps.length ? userOps.map(op => `
                <div class="operation">
                    <div>${op.description}</div>
                    <div style="color: ${op.amount > 0 ? 'green' : 'red'}">
                        ${op.amount > 0 ? '+' : ''}${op.amount} ‚ÇΩ
                    </div>
                </div>
            `).join('') : '–û–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç';
        }

        function loadHistory() {
            const userOps = operations.filter(op => 
                op.userId === currentUser.id || op.fromId === currentUser.id
            ).reverse();
            
            document.getElementById('operationsList').innerHTML = userOps.length ? 
                userOps.map(op => `
                    <div class="operation">
                        <div>${op.description}</div>
                        <div style="color: ${op.amount > 0 ? 'green' : 'red'}">
                            ${op.amount > 0 ? '+' : ''}${op.amount} ‚ÇΩ
                        </div>
                    </div>
                `).join('') : '–û–ø–µ—Ä–∞—Ü–∏–π –Ω–µ—Ç';
        }

        function loadProfile() {
            document.getElementById('profileInfo').innerHTML = `
                <p><strong>–ò–º—è:</strong> ${currentUser.name} ${currentUser.lastName}</p>
                <p><strong>Email:</strong> ${currentUser.email}</p>
                <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${currentUser.phone}</p>
                <p><strong>–ë–∞–ª–∞–Ω—Å:</strong> ${currentUser.balance} ‚ÇΩ</p>
                <p><strong>–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:</strong> ${currentUser.verified ? '‚úÖ' : '‚ùå'}</p>
                <p><strong>–ü–∞—Å–ø–æ—Ä—Ç:</strong> ${currentUser.passport ? '‚úÖ' : '‚ùå'}</p>
            `;
            
            document.getElementById('verifyBtn').style.display = 
                currentUser.verified ? 'none' : 'block';
        }

        function updateUI() {
            if (currentUser) {
                document.getElementById('userWelcome').textContent = `–ü—Ä–∏–≤–µ—Ç, ${currentUser.name}!`;
                document.getElementById('userBalance').textContent = `${currentUser.balance} ‚ÇΩ`;
                
                if (currentUser.role === 'admin') {
                    document.getElementById('adminNav').style.display = 'block';
                } else {
                    document.getElementById('adminNav').style.display = 'none';
                }
            }
        }

        function logout() {
            currentUser = null;
            showView('login');
        }

        // –ó–∞–ø—É—Å–∫
        showView('login');
    </script>
</body>
</html>
