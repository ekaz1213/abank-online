<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê –ë–ê–ù–ö - –ü—Ä–µ–º–∏—É–º –ë–∞–Ω–∫–∏–Ω–≥</title>
    <style>
        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
        }
        
        body { 
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #2d3748;
        }
        
        .app {
            width: 100%;
            max-width: 480px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
            opacity: 0.1;
        }
        
        .logo {
            font-size: 28px;
            font-weight: 800;
            margin-bottom: 8px;
            position: relative;
        }
        
        .subtitle {
            opacity: 0.9;
            font-size: 14px;
            font-weight: 500;
        }
        
        .content {
            padding: 25px;
            max-height: 70vh;
            overflow-y: auto;
        }
        
        .card {
            background: white;
            padding: 25px;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.1);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 16px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            margin-bottom: 16px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #f8fafc;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #667eea;
            outline: none;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            background: white;
        }
        
        button {
            width: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 12px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        
        button:hover::before {
            left: 100%;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: #6c757d;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .btn-warning {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }
        
        .balance {
            font-size: 36px;
            font-weight: 800;
            color: #1e293b;
            margin: 12px 0;
            text-align: center;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .nav-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 20px;
        }
        
        .nav-btn {
            background: white;
            border: 2px solid #e2e8f0;
            padding: 20px 12px;
            border-radius: 16px;
            text-align: center;
            cursor: pointer;
            font-size: 14px;
            color: #2d3748;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .nav-btn:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        
        .operation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f8fafc;
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }
        
        .operation:hover {
            background: white;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            margin-left: 8px;
        }
        
        .badge-success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .badge-warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .badge-danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .badge-premium {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .hidden {
            display: none !important;
        }
        
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            background: #f8fafc;
            padding: 6px;
            border-radius: 12px;
        }
        
        .tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            color: #64748b;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background: white;
            color: #667eea;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2);
            animation: modalSlideIn 0.3s ease;
        }
        
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: 800;
            margin: 8px 0;
        }
        
        .user-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: #f8fafc;
            border-radius: 12px;
            margin-bottom: 10px;
        }
        
        .user-actions {
            display: flex;
            gap: 8px;
        }
        
        .action-btn {
            padding: 8px 16px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            width: auto;
        }
        
        .promo-card {
            background: linear-gradient(135deg, #f0f4ff, #f8fafc);
            border: 2px dashed #cbd5e1;
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 15px;
        }
        
        .card-type-selector {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .card-option {
            padding: 20px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .card-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: #667eea;
        }
        
        .card-option.premium::before {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .card-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
        }
        
        .card-option.premium {
            border-color: #f59e0b;
        }
        
        .card-option.premium.selected {
            background: #fef3c7;
            box-shadow: 0 8px 20px rgba(245, 158, 11, 0.2);
        }
        
        .card-price {
            font-size: 14px;
            color: #64748b;
            margin-top: 5px;
        }
        
        .card-benefits {
            font-size: 12px;
            color: #94a3b8;
            margin-top: 8px;
            line-height: 1.4;
        }
        
        .card-design {
            width: 100%;
            height: 160px;
            border-radius: 12px;
            margin: 15px 0;
            background: linear-gradient(135deg, #667eea, #764ba2);
            position: relative;
            overflow: hidden;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .card-design.premium {
            background: linear-gradient(135deg, #f59e0b, #d97706, #ef4444);
        }
        
        .card-chip {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 40px;
            height: 30px;
            background: linear-gradient(135deg, #ffd700, #ffed4e);
            border-radius: 5px;
        }
        
        .card-number {
            position: absolute;
            bottom: 40px;
            left: 20px;
            color: white;
            font-size: 18px;
            font-weight: 600;
            letter-spacing: 2px;
        }
        
        .card-holder {
            position: absolute;
            bottom: 20px;
            left: 20px;
            color: white;
            font-size: 12px;
            opacity: 0.8;
        }
        
        .card-logo {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 18px;
            font-weight: 700;
        }
        
        .requests-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .request-item {
            background: #f8fafc;
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 10px;
            border-left: 4px solid #f59e0b;
        }
        
        .spb-code {
            background: linear-gradient(135deg, #1e3a8a, #3730a3);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            font-weight: 700;
            letter-spacing: 2px;
        }
        
        .no-card-banner {
            background: linear-gradient(135deg, #f0f4ff, #e0e7ff);
            border: 2px dashed #c7d2fe;
            padding: 20px;
            border-radius: 16px;
            text-align: center;
            margin: 15px 0;
        }
        
        .subscription-item {
            background: #f8fafc;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 15px;
            border-left: 4px solid #10b981;
        }
        
        .subscription-price {
            font-size: 24px;
            font-weight: 700;
            color: #10b981;
            margin: 10px 0;
        }
        
        .subscription-description {
            color: #64748b;
            margin-bottom: 15px;
            font-size: 14px;
        }
        
        @media (max-width: 480px) {
            .content {
                padding: 20px;
            }
            
            .card {
                padding: 20px;
            }
            
            .nav-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 25px 20px;
            }
        }
        
        @media (min-width: 768px) {
            .app {
                max-width: 500px;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <div class="header">
            <div class="logo">–ê –ë–ê–ù–ö</div>
            <div class="subtitle">–ü—Ä–µ–º–∏—É–º –ë–∞–Ω–∫–∏–Ω–≥ + –°–ë–ü –ü–ª–∞—Ç–µ–∂–∏</div>
        </div>
        
        <div class="content">
            <!-- –õ–æ–≥–∏–Ω -->
            <div id="loginView">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É</h3>
                    <input type="email" id="loginEmail" placeholder="–í–∞—à email" value="user@example.com">
                    <input type="password" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" value="user123">
                    <button onclick="login()">üîê –í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É</button>
                    <button class="btn-secondary" onclick="showView('register')">‚ú® –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                    
                    <div style="margin-top: 20px; padding: 15px; background: #f0f4ff; border-radius: 12px;">
                        <h4 style="margin-bottom: 10px;">–¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:</h4>
                        <div style="font-size: 14px; color: #64748b;">
                            <div><strong>–û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</strong> user@example.com / user123</div>
                            <div><strong>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä:</strong> admin@abank.ru / Admin123!</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è -->
            <div id="registerView" class="hidden">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞</h3>
                    <input type="text" id="regName" placeholder="–ò–º—è">
                    <input type="text" id="regLastName" placeholder="–§–∞–º–∏–ª–∏—è">
                    <input type="email" id="regEmail" placeholder="Email">
                    <input type="tel" id="regPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
                    <input type="password" id="regPassword" placeholder="–ü–∞—Ä–æ–ª—å">
                    <button onclick="register()">üéÅ –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                    <button class="btn-secondary" onclick="showView('login')">‚Üê –ù–∞–∑–∞–¥ –∫ –≤—Ö–æ–¥—É</button>
                </div>
            </div>

            <!-- –î–∞—à–±–æ—Ä–¥ -->
            <div id="dashboardView" class="hidden">
                <div class="card">
                    <h3 id="userWelcome" style="text-align: center;">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h3>
                    <div class="balance" id="userBalance">0 ‚ÇΩ</div>
                    
                    <!-- –ë–∞–Ω–Ω–µ—Ä "–û—Ñ–æ—Ä–º–∏ –∫–∞—Ä—Ç—É" –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞—Ä—Ç -->
                    <div id="noCardBanner" class="no-card-banner hidden">
                        <div style="font-size: 48px; margin-bottom: 10px;">üí≥</div>
                        <h4 style="margin-bottom: 10px;">–ü–æ–ª—É—á–∏—Ç–µ —Å–≤–æ—é –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç—É!</h4>
                        <p style="color: #64748b; margin-bottom: 15px;">–û—Ç–∫—Ä–æ–π—Ç–µ –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –±–∞–Ω–∫–∏–Ω–≥–∞</p>
                        <button onclick="showCardSelection()" style="width: auto; padding: 10px 20px;">
                            üéâ –û—Ñ–æ—Ä–º–∏—Ç—å –∫–∞—Ä—Ç—É
                        </button>
                    </div>
                    
                    <div class="nav-grid">
                        <div class="nav-btn" onclick="showView('transfer')">
                            <div style="font-size: 20px; margin-bottom: 5px;">üí∏</div>
                            –ü–µ—Ä–µ–≤–æ–¥
                        </div>
                        <div class="nav-btn" onclick="showView('spb')">
                            <div style="font-size: 20px; margin-bottom: 5px;">üîó</div>
                            –°–ü–ë
                        </div>
                        <div class="nav-btn" onclick="showView('history')">
                            <div style="font-size: 20px; margin-bottom: 5px;">üìä</div>
                            –ò—Å—Ç–æ—Ä–∏—è
                        </div>
                        <div class="nav-btn" onclick="showView('profile')">
                            <div style="font-size: 20px; margin-bottom: 5px;">üë§</div>
                            –ü—Ä–æ—Ñ–∏–ª—å
                        </div>
                        <div class="nav-btn" onclick="showView('promo')">
                            <div style="font-size: 20px; margin-bottom: 5px;">üé´</div>
                            –ü—Ä–æ–º–æ–∫–æ–¥—ã
                        </div>
                        <div class="nav-btn" onclick="showView('admin')" id="adminNav">
                            <div style="font-size: 20px; margin-bottom: 5px;">üëë</div>
                            –ê–¥–º–∏–Ω
                        </div>
                    </div>
                </div>
                
                <div class="card">
                    <h4 style="margin-bottom: 15px;">üí≥ –ú–æ–∏ –∫–∞—Ä—Ç—ã</h4>
                    <div id="cardsList">–ö–∞—Ä—Ç –ø–æ–∫–∞ –Ω–µ—Ç</div>
                </div>
                
                <div class="card">
                    <h4 style="margin-bottom: 15px;">üìà –ü–æ—Å–ª–µ–¥–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏</h4>
                    <div id="recentOperations">–û–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>
                </div>
                
                <button class="btn-secondary" onclick="logout()">üö™ –í—ã–π—Ç–∏</button>
            </div>

            <!-- –ü–µ—Ä–µ–≤–æ–¥—ã -->
            <div id="transferView" class="hidden">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">üí∏ –ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤</h3>
                    
                    <div class="tabs">
                        <div class="tab active" onclick="setTransferType('email')">üìß Email</div>
                        <div class="tab" onclick="setTransferType('phone')">üì± –¢–µ–ª–µ—Ñ–æ–Ω</div>
                        <div class="tab" onclick="setTransferType('card')">üí≥ –ö–∞—Ä—Ç–∞</div>
                    </div>
                    
                    <input type="text" id="transferTo" placeholder="Email –ø–æ–ª—É—á–∞—Ç–µ–ª—è">
                    <input type="number" id="transferAmount" placeholder="–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞">
                    <input type="text" id="transferDesc" placeholder="–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞">
                    <button onclick="makeTransfer()">üöÄ –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥</button>
                    <button class="btn-secondary" onclick="showView('dashboard')">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –°–ü–ë –ü–ª–∞—Ç–µ–∂–∏ -->
            <div id="spbView" class="hidden">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">üîó –°–∏—Å—Ç–µ–º–∞ –±—ã—Å—Ç—Ä—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π</h3>
                    
                    <div class="tabs">
                        <div class="tab active" onclick="setSPBMode('generate')">üé´ –°–æ–∑–¥–∞—Ç—å –∫–æ–¥</div>
                        <div class="tab" onclick="setSPBMode('use')">üí≥ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–¥</div>
                        <div class="tab" onclick="setSPBMode('subscriptions')">üõí –ü–æ–¥–ø–∏—Å–∫–∏/–¢–æ–≤–∞—Ä—ã</div>
                    </div>
                    
                    <div id="spbGenerateSection">
                        <input type="number" id="spbAmount" placeholder="–°—É–º–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞">
                        <input type="text" id="spbDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞">
                        <button onclick="generateSPBCode()">‚ú® –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –°–ü–ë</button>
                        <div id="spbCodeResult" class="hidden">
                            <div class="spb-code" id="spbCodeDisplay">SPB-XXXX-XXXX</div>
                            <p style="text-align: center; color: #64748b; font-size: 14px;">
                                –ü–æ–∫–∞–∂–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–ª–∞—Ç–µ–∂–∞
                            </p>
                        </div>
                    </div>
                    
                    <div id="spbUseSection" class="hidden">
                        <input type="text" id="spbCodeInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –°–ü–ë">
                        <button onclick="useSPBCode()">üí∏ –ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞—Ç–µ–∂</button>
                    </div>
                    
                    <div id="spbSubscriptionsSection" class="hidden">
                        <h4 style="margin-bottom: 15px;">–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ —Ç–æ–≤–∞—Ä—ã</h4>
                        <div id="subscriptionsList">
                            <!-- –ü–æ–¥–ø–∏—Å–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                        </div>
                        <button onclick="showModal('createSubscriptionModal')" class="btn-success">‚ûï –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</button>
                    </div>
                    
                    <button class="btn-secondary" onclick="showView('dashboard')">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ò—Å—Ç–æ—Ä–∏—è -->
            <div id="historyView" class="hidden">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">üìä –ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
                    <div id="operationsList">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <button class="btn-secondary" onclick="showView('dashboard')">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
            <div id="profileView" class="hidden">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</h3>
                    <div id="profileInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                    <button onclick="showPassportModal()" id="addPassportBtn">üÜî –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Å–ø–æ—Ä—Ç</button>
                    <button class="btn-success" onclick="requestVerification()" id="verifyBtn">‚úÖ –ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é</button>
                    <button class="btn-secondary" onclick="showView('dashboard')">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ü—Ä–æ–º–æ–∫–æ–¥—ã -->
            <div id="promoView" class="hidden">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">üé´ –ü—Ä–æ–º–æ–∫–æ–¥—ã</h3>
                    <input type="text" id="promoCode" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø—Ä–æ–º–æ–∫–æ–¥">
                    <button onclick="activatePromo()">üéÅ –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</button>
                    <div id="activePromos" style="margin-top: 20px;">
                        <h4>–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ–º–æ–∫–æ–¥—ã:</h4>
                        <div id="promosList">–ü—Ä–æ–º–æ–∫–æ–¥–æ–≤ –Ω–µ—Ç</div>
                    </div>
                    <button class="btn-secondary" onclick="showView('dashboard')">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
            </div>

            <!-- –ê–¥–º–∏–Ω -->
            <div id="adminView" class="hidden">
                <div class="card">
                    <h3 style="text-align: center; margin-bottom: 20px;">üëë –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å</h3>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div>üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div>
                            <div class="stat-value" id="adminTotalUsers">0</div>
                        </div>
                        <div class="stat-card">
                            <div>‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã</div>
                            <div class="stat-value" id="adminVerifiedUsers">0</div>
                        </div>
                        <div class="stat-card">
                            <div>üí≥ –ö–∞—Ä—Ç—ã</div>
                            <div class="stat-value" id="adminTotalCards">0</div>
                        </div>
                        <div class="stat-card">
                            <div>üí∞ –ë–∞–ª–∞–Ω—Å</div>
                            <div class="stat-value" id="adminTotalBalance">0‚ÇΩ</div>
                        </div>
                    </div>

                    <div class="tabs">
                        <div class="tab active" onclick="setAdminTab('users')">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</div>
                        <div class="tab" onclick="setAdminTab('requests')">üìã –ó–∞–ø—Ä–æ—Å—ã</div>
                        <div class="tab" onclick="setAdminTab('tools')">üõ†Ô∏è –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã</div>
                    </div>

                    <div id="adminUsersTab">
                        <button onclick="showModal('usersModal')">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</button>
                        <button onclick="showModal('passportAdminModal')" class="btn-warning">üÜî –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Å–ø–æ—Ä—Ç</button>
                    </div>

                    <div id="adminRequestsTab" class="hidden">
                        <div class="requests-list" id="requestsList">
                            –ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤...
                        </div>
                    </div>

                    <div id="adminToolsTab" class="hidden">
                        <button onclick="showModal('promoModal')" class="btn-success">üé´ –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</button>
                        <button onclick="resetDB()" class="btn-danger">üóëÔ∏è –°–±—Ä–æ—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö</button>
                    </div>

                    <button class="btn-secondary" onclick="showView('dashboard')">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="passportModal">
        <div class="modal-content">
            <h3 style="text-align: center; margin-bottom: 20px;">üÜî –ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
            <input type="text" id="passportSeries" placeholder="–°–µ—Ä–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞" maxlength="4">
            <input type="text" id="passportNumber" placeholder="–ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞" maxlength="6">
            <input type="text" id="passportIssued" placeholder="–ö–µ–º –≤—ã–¥–∞–Ω">
            <input type="text" id="passportCode" placeholder="–ö–æ–¥ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è">
            <div style="display: flex; gap: 10px;">
                <button onclick="savePassport()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                <button class="btn-secondary" onclick="closeModal('passportModal')">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="modal" id="passportAdminModal">
        <div class="modal-content">
            <h3 style="text-align: center; margin-bottom: 20px;">üÜî –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Å–ø–æ—Ä—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é</h3>
            <select id="adminUserSelect">
                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</option>
            </select>
            <input type="text" id="adminPassportSeries" placeholder="–°–µ—Ä–∏—è –ø–∞—Å–ø–æ—Ä—Ç–∞" maxlength="4">
            <input type="text" id="adminPassportNumber" placeholder="–ù–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞" maxlength="6">
            <input type="text" id="adminPassportIssued" placeholder="–ö–µ–º –≤—ã–¥–∞–Ω">
            <input type="text" id="adminPassportCode" placeholder="–ö–æ–¥ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è">
            <div style="display: flex; gap: 10px;">
                <button onclick="adminSavePassport()">üíæ –î–æ–±–∞–≤–∏—Ç—å –ø–∞—Å–ø–æ—Ä—Ç</button>
                <button class="btn-secondary" onclick="closeModal('passportAdminModal')">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="modal" id="cardSelectionModal">
        <div class="modal-content">
            <h3 style="text-align: center; margin-bottom: 20px;">üí≥ –í—ã–±–æ—Ä –∫–∞—Ä—Ç—ã</h3>
            
            <div class="card-design" id="cardPreview">
                <div class="card-chip"></div>
                <div class="card-number">‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
                <div class="card-holder">CARDHOLDER NAME</div>
                <div class="card-logo" id="cardLogo">VISA</div>
            </div>
            
            <div class="card-type-selector">
                <div class="card-option" onclick="selectCardType('standard')">
                    <div style="font-size: 24px; margin-bottom: 10px;">üí≥</div>
                    <strong>Visa Classic</strong>
                    <div class="card-price">99 ‚ÇΩ/–º–µ—Å</div>
                    <div class="card-benefits">–ö—ç—à–±—ç–∫ 1% ‚Ä¢ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã</div>
                </div>
                <div class="card-option premium" onclick="selectCardType('premium')">
                    <div style="font-size: 24px; margin-bottom: 10px;">üíé</div>
                    <strong>Mastercard Premium</strong>
                    <div class="card-price">299 ‚ÇΩ/–º–µ—Å</div>
                    <div class="card-benefits">–ö—ç—à–±—ç–∫ 5% ‚Ä¢ –°—Ç—Ä–∞—Ö–æ–≤–∫–∞ ‚Ä¢ –ü—Ä–µ–º–∏—É–º-–ø–æ–¥–¥–µ—Ä–∂–∫–∞</div>
                </div>
            </div>
            
            <div style="display: flex; gap: 10px;">
                <button onclick="applySelectedCard()">üí≥ –í—ã–ø—É—Å—Ç–∏—Ç—å –∫–∞—Ä—Ç—É</button>
                <button class="btn-secondary" onclick="closeModal('cardSelectionModal')">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="modal" id="usersModal">
        <div class="modal-content">
            <h3 style="text-align: center; margin-bottom: 20px;">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h3>
            <div id="usersList" style="max-height: 300px; overflow-y: auto; margin-bottom: 20px;">
                –ó–∞–≥—Ä—É–∑–∫–∞...
            </div>
            <button class="btn-secondary" onclick="closeModal('usersModal')">‚ùå –ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div class="modal" id="promoModal">
        <div class="modal-content">
            <h3 style="text-align: center; margin-bottom: 20px;">üé´ –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</h3>
            <input type="text" id="promoName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–º–æ–∫–æ–¥–∞">
            <input type="text" id="promoCodeInput" placeholder="–ö–æ–¥ –ø—Ä–æ–º–æ–∫–æ–¥–∞">
            <input type="number" id="promoAmount" placeholder="–°—É–º–º–∞ –±–æ–Ω—É—Å–∞">
            <input type="number" id="promoUses" placeholder="–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π">
            <input type="date" id="promoExpires" placeholder="–î–µ–π—Å—Ç–≤—É–µ—Ç –¥–æ">
            <div style="display: flex; gap: 10px;">
                <button onclick="createPromo()">‚ú® –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–º–æ–∫–æ–¥</button>
                <button class="btn-secondary" onclick="closeModal('promoModal')">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <div class="modal" id="createSubscriptionModal">
        <div class="modal-content">
            <h3 style="text-align: center; margin-bottom: 20px;">üõí –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</h3>
            <input type="text" id="subscriptionName" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞/–ø–æ–¥–ø–∏—Å–∫–∏">
            <input type="number" id="subscriptionPrice" placeholder="–¶–µ–Ω–∞">
            <textarea id="subscriptionDescription" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ" rows="3"></textarea>
            <div style="display: flex; gap: 10px;">
                <button onclick="createSubscription()">‚ú® –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ</button>
                <button class="btn-secondary" onclick="closeModal('createSubscriptionModal')">‚ùå –û—Ç–º–µ–Ω–∞</button>
            </div>
        </div>
    </div>

    <script>
        // –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é
        let users = JSON.parse(localStorage.getItem('abank_users')) || JSON.parse(localStorage.getItem('bank_users')) || [];
        let operations = JSON.parse(localStorage.getItem('abank_operations')) || JSON.parse(localStorage.getItem('bank_operations')) || [];
        let promoCodes = JSON.parse(localStorage.getItem('abank_promos')) || [];
        let spbCodes = JSON.parse(localStorage.getItem('abank_spb')) || [];
        let verificationRequests = JSON.parse(localStorage.getItem('abank_requests')) || [];
        let subscriptions = JSON.parse(localStorage.getItem('abank_subscriptions')) || [];
        let currentUser = null;
        let transferType = 'email';
        let selectedCardType = 'standard';
        let spbMode = 'generate';
        let adminTab = 'users';

        // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∞–¥–º–∏–Ω–∞ –µ—Å–ª–∏ –Ω–µ—Ç
        if (users.length === 0) {
            users.push({
                id: 'user_1',
                name: '–¢–µ—Å—Ç–æ–≤—ã–π', lastName: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å',
                email: 'user@example.com', phone: '+79991112233',
                password: 'user123', balance: 5000,
                role: 'user', cards: [], verified: false,
                passport: null, passportConfirmed: false,
                activePromos: []
            });
            
            users.push({
                id: 'admin',
                name: '–ê–¥–º–∏–Ω', lastName: '–°–∏—Å—Ç–µ–º—ã',
                email: 'admin@abank.ru', phone: '+79990000000',
                password: 'Admin123!', balance: 100000,
                role: 'admin', cards: [], verified: true,
                passport: {series: '0000', number: '000000'}, passportConfirmed: true,
                activePromos: []
            });
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –ø–æ–¥–ø–∏—Å–∫–∏
            subscriptions.push({
                id: 'sub_1',
                name: '–ü—Ä–µ–º–∏—É–º –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –º—É–∑—ã–∫—É',
                price: 299,
                description: '–î–æ—Å—Ç—É–ø –∫ –º–∏–ª–ª–∏–æ–Ω–∞–º —Ç—Ä–µ–∫–æ–≤ –±–µ–∑ —Ä–µ–∫–ª–∞–º—ã',
                createdBy: 'admin',
                createdAt: new Date().toISOString(),
                active: true,
                salesCount: 0
            });
            
            subscriptions.push({
                id: 'sub_2',
                name: '–ì–æ–¥–æ–≤–æ–π –∫—É—Ä—Å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è',
                price: 15000,
                description: '–ü–æ–ª–Ω—ã–π –∫—É—Ä—Å –ø–æ –≤–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –º–µ–Ω—Ç–æ—Ä–∞',
                createdBy: 'admin',
                createdAt: new Date().toISOString(),
                active: true,
                salesCount: 0
            });
            
            saveData();
        }

        function saveData() {
            localStorage.setItem('abank_users', JSON.stringify(users));
            localStorage.setItem('abank_operations', JSON.stringify(operations));
            localStorage.setItem('abank_promos', JSON.stringify(promoCodes));
            localStorage.setItem('abank_spb', JSON.stringify(spbCodes));
            localStorage.setItem('abank_requests', JSON.stringify(verificationRequests));
            localStorage.setItem('abank_subscriptions', JSON.stringify(subscriptions));
        }

        function showView(viewName) {
            document.querySelectorAll('[id$="View"]').forEach(view => {
                view.classList.add('hidden');
            });
            document.getElementById(viewName + 'View').classList.remove('hidden');
            
            if (viewName === 'dashboard') loadDashboard();
            if (viewName === 'history') loadHistory();
            if (viewName === 'profile') loadProfile();
            if (viewName === 'admin') loadAdmin();
            if (viewName === 'promo') loadPromos();
            if (viewName === 'spb') loadSPB();
        }

        function setSPBMode(mode) {
            spbMode = mode;
            document.querySelectorAll('#spbView .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.getElementById('spbGenerateSection').classList.toggle('hidden', mode !== 'generate');
            document.getElementById('spbUseSection').classList.toggle('hidden', mode !== 'use');
            document.getElementById('spbSubscriptionsSection').classList.toggle('hidden', mode !== 'subscriptions');
            
            if (mode === 'subscriptions') loadSubscriptions();
        }

        function setAdminTab(tab) {
            adminTab = tab;
            document.querySelectorAll('#adminView .tab').forEach(t => {
                t.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.getElementById('adminUsersTab').classList.toggle('hidden', tab !== 'users');
            document.getElementById('adminRequestsTab').classList.toggle('hidden', tab !== 'requests');
            document.getElementById('adminToolsTab').classList.toggle('hidden', tab !== 'tools');
            
            if (tab === 'requests') loadRequests();
        }

        function showModal(modalId) {
            if (modalId === 'usersModal') loadUsersList();
            if (modalId === 'passportAdminModal') loadUsersForPassport();
            document.getElementById(modalId).style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // –õ–æ–≥–∏–Ω –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
        function login() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            const user = users.find(u => u.email === email && u.password === password);
            
            if (user) {
                currentUser = user;
                updateUI();
                showView('dashboard');
            } else {
                alert('‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π email –∏–ª–∏ –ø–∞—Ä–æ–ª—å');
            }
        }

        function register() {
            const userData = {
                name: document.getElementById('regName').value,
                lastName: document.getElementById('regLastName').value,
                email: document.getElementById('regEmail').value,
                phone: document.getElementById('regPhone').value,
                password: document.getElementById('regPassword').value
            };
            
            if (users.find(u => u.email === userData.email)) {
                alert('‚ùå Email —É–∂–µ –∑–∞–Ω—è—Ç'); return;
            }
            
            const newUser = {
                id: 'user_' + Date.now(), ...userData,
                balance: 0, role: 'user', cards: [],
                verified: false, passport: null, passportConfirmed: false,
                activePromos: []
            };
            
            users.push(newUser);
            currentUser = newUser;
            saveData();
            updateUI();
            showView('dashboard');
            alert('üéâ –ê–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω! –û—Ñ–æ—Ä–º–∏—Ç–µ –∫–∞—Ä—Ç—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –±–æ–Ω—É—Å–∞');
        }

        // –ü–µ—Ä–µ–≤–æ–¥—ã
        function setTransferType(type) {
            transferType = type;
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            const placeholder = {
                'email': 'Email –ø–æ–ª—É—á–∞—Ç–µ–ª—è',
                'phone': '–¢–µ–ª–µ—Ñ–æ–Ω –ø–æ–ª—É—á–∞—Ç–µ–ª—è', 
                'card': '–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã'
            }[type];
            document.getElementById('transferTo').placeholder = placeholder;
        }

        function makeTransfer() {
            const to = document.getElementById('transferTo').value;
            const amount = Number(document.getElementById('transferAmount').value);
            const desc = document.getElementById('transferDesc').value;
            
            let recipient = users.find(u => 
                u.email === to || u.phone === to || 
                u.cards.some(c => c.number.includes(to))
            );
            
            if (!recipient) { alert('‚ùå –ü–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω'); return; }
            if (currentUser.balance < amount) { alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤'); return; }
            
            currentUser.balance -= amount;
            recipient.balance += amount;
            
            operations.push({
                id: 'op_' + Date.now(), type: 'transfer',
                fromId: currentUser.id, toId: recipient.id,
                amount: amount, description: desc,
                at: new Date().toISOString()
            });
            
            saveData();
            updateUI();
            showView('dashboard');
            alert(`‚úÖ –ü–µ—Ä–µ–≤–æ–¥ ${amount} ‚ÇΩ –≤—ã–ø–æ–ª–Ω–µ–Ω!`);
        }

        // –ö–∞—Ä—Ç—ã
        function showCardSelection() {
            if (!currentUser.passport) {
                alert('‚ùå –î–ª—è –≤—ã–ø—É—Å–∫–∞ –∫–∞—Ä—Ç—ã –Ω—É–∂–Ω—ã –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'); 
                showView('profile'); 
                return;
            }
            if (!currentUser.passportConfirmed) {
                alert('‚ùå –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –ø—Ä–æ—Ñ–∏–ª–µ'); 
                showView('profile');
                return;
            }
            
            showModal('cardSelectionModal');
        }

        function selectCardType(type) {
            selectedCardType = type;
            document.querySelectorAll('.card-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–µ–≤—å—é –∫–∞—Ä—Ç—ã
            const cardPreview = document.getElementById('cardPreview');
            const cardLogo = document.getElementById('cardLogo');
            
            if (type === 'premium') {
                cardPreview.className = 'card-design premium';
                cardLogo.textContent = 'PREMIUM';
            } else {
                cardPreview.className = 'card-design';
                cardLogo.textContent = 'VISA';
            }
        }

        function applySelectedCard() {
            const cardCost = selectedCardType === 'premium' ? 299 : 99;
            const bonusAmount = selectedCardType === 'premium' ? 1000 : 500;
            
            if (currentUser.balance < cardCost) {
                alert(`‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã –∫–∞—Ä—Ç—ã (${cardCost} ‚ÇΩ)`);
                return;
            }
            
            // –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∫–∞—Ä—Ç—ã
            currentUser.balance -= cardCost;
            
            // –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –±–æ–Ω—É—Å–∞ –∑–∞ –ø–µ—Ä–≤—É—é –∫–∞—Ä—Ç—É
            if (currentUser.cards.length === 0) {
                currentUser.balance += bonusAmount;
                operations.push({
                    id: 'op_' + Date.now(),
                    type: 'bonus',
                    userId: currentUser.id,
                    amount: bonusAmount,
                    description: `–ë–æ–Ω—É—Å –∑–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ ${selectedCardType === 'premium' ? '–ø—Ä–µ–º–∏—É–º' : '—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π'} –∫–∞—Ä—Ç—ã`,
                    at: new Date().toISOString()
                });
            }
            
            const cardNumber = '5536 ' + Math.floor(1000 + Math.random() * 9000);
            const cardType = selectedCardType === 'premium' ? 'Mastercard Premium' : 'Visa Classic';
            
            currentUser.cards.push({
                number: cardNumber, 
                type: cardType,
                tier: selectedCardType,
                issuedAt: new Date().toISOString(),
                cost: cardCost
            });
            
            operations.push({
                id: 'op_' + Date.now(), 
                type: 'card_issue',
                userId: currentUser.id, 
                amount: -cardCost,
                description: `–í—ã–ø—É—Å–∫ ${cardType}`,
                at: new Date().toISOString()
            });
            
            saveData();
            closeModal('cardSelectionModal');
            updateUI();
            alert(`üí≥ ${cardType} –≤—ã–ø—É—â–µ–Ω–∞: ${cardNumber}\nüéÅ –ë–æ–Ω—É—Å ${bonusAmount} ‚ÇΩ –∑–∞—á–∏—Å–ª–µ–Ω!`);
        }

        // –°–ü–ë –ü–ª–∞—Ç–µ–∂–∏
        function loadSPB() {
            document.getElementById('spbCodeResult').classList.add('hidden');
        }

        function generateSPBCode() {
            const amount = Number(document.getElementById('spbAmount').value);
            const description = document.getElementById('spbDescription').value;
            
            if (!amount || amount <= 0) {
                alert('‚ùå –í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É');
                return;
            }
            
            const code = 'SPB-' + Math.random().toString(36).substr(2, 8).toUpperCase();
            
            spbCodes.push({
                id: 'spb_' + Date.now(),
                code: code,
                amount: amount,
                description: description,
                createdBy: currentUser.id,
                createdAt: new Date().toISOString(),
                used: false
            });
            
            saveData();
            
            document.getElementById('spbCodeDisplay').textContent = code;
            document.getElementById('spbCodeResult').classList.remove('hidden');
        }

        function useSPBCode() {
            const code = document.getElementById('spbCodeInput').value.toUpperCase();
            const spbCode = spbCodes.find(c => c.code === code && !c.used);
            
            if (!spbCode) {
                alert('‚ùå –ö–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω –∏–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω');
                return;
            }
            
            const creator = users.find(u => u.id === spbCode.createdBy);
            if (!creator) {
                alert('‚ùå –û—à–∏–±–∫–∞: —Å–æ–∑–¥–∞—Ç–µ–ª—å –∫–æ–¥–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω');
                return;
            }
            
            if (creator.balance < spbCode.amount) {
                alert('‚ùå –£ —Å–æ–∑–¥–∞—Ç–µ–ª—è –∫–æ–¥–∞ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤');
                return;
            }
            
            // –ü–µ—Ä–µ–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤
            creator.balance -= spbCode.amount;
            currentUser.balance += spbCode.amount;
            spbCode.used = true;
            spbCode.usedBy = currentUser.id;
            spbCode.usedAt = new Date().toISOString();
            
            operations.push({
                id: 'op_' + Date.now(),
                type: 'spb_transfer',
                fromId: creator.id,
                toId: currentUser.id,
                amount: spbCode.amount,
                description: `–°–ü–ë –ø–ª–∞—Ç–µ–∂: ${spbCode.description}`,
                at: new Date().toISOString()
            });
            
            saveData();
            updateUI();
            document.getElementById('spbCodeInput').value = '';
            alert(`‚úÖ –ü–æ–ª—É—á–µ–Ω –ø–ª–∞—Ç–µ–∂ ${spbCode.amount} ‚ÇΩ –ø–æ –∫–æ–¥—É –°–ü–ë!`);
        }

        // –ü–æ–¥–ø–∏—Å–∫–∏ –∏ —Ç–æ–≤–∞—Ä—ã
        function loadSubscriptions() {
            const container = document.getElementById('subscriptionsList');
            const activeSubscriptions = subscriptions.filter(s => s.active);
            
            if (activeSubscriptions.length === 0) {
                container.innerHTML = '<div class="operation">–ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>';
                return;
            }
            
            container.innerHTML = activeSubscriptions.map(sub => `
                <div class="subscription-item">
                    <h4>${sub.name}</h4>
                    <div class="subscription-price">${sub.price} ‚ÇΩ</div>
                    <div class="subscription-description">${sub.description}</div>
                    <button onclick="buySubscription('${sub.id}')" style="width: auto; padding: 10px 20px;">
                        üõí –ö—É–ø–∏—Ç—å
                    </button>
                </div>
            `).join('');
        }

        function createSubscription() {
            const name = document.getElementById('subscriptionName').value;
            const price = Number(document.getElementById('subscriptionPrice').value);
            const description = document.getElementById('subscriptionDescription').value;
            
            if (!name || !price || !description) {
                alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è');
                return;
            }
            
            const newSubscription = {
                id: 'sub_' + Date.now(),
                name: name,
                price: price,
                description: description,
                createdBy: currentUser.id,
                createdAt: new Date().toISOString(),
                active: true,
                salesCount: 0
            };
            
            subscriptions.push(newSubscription);
            saveData();
            closeModal('createSubscriptionModal');
            loadSubscriptions();
            alert('‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–æ!');
        }

        function buySubscription(subscriptionId) {
            const subscription = subscriptions.find(s => s.id === subscriptionId);
            if (!subscription) return;
            
            if (currentUser.balance < subscription.price) {
                alert('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –¥–ª—è –ø–æ–∫—É–ø–∫–∏');
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –∫–æ–¥ –°–ü–ë –¥–ª—è –ø–æ–∫—É–ø–∫–∏
            const code = 'SPB-' + Math.random().toString(36).substr(2, 8).toUpperCase();
            
            spbCodes.push({
                id: 'spb_' + Date.now(),
                code: code,
                amount: subscription.price,
                description: `–ü–æ–∫—É–ø–∫–∞: ${subscription.name}`,
                createdBy: currentUser.id,
                createdAt: new Date().toISOString(),
                used: false,
                subscriptionId: subscriptionId
            });
            
            // –°–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤
            currentUser.balance -= subscription.price;
            
            operations.push({
                id: 'op_' + Date.now(),
                type: 'subscription_purchase',
                userId: currentUser.id,
                amount: -subscription.price,
                description: `–ü–æ–∫—É–ø–∫–∞: ${subscription.name}`,
                at: new Date().toISOString()
            });
            
            saveData();
            alert(`‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–¥ –°–ü–ë –¥–ª—è –ø–æ–∫—É–ø–∫–∏: ${code}\n–ü–æ–∫–∞–∂–∏—Ç–µ –µ–≥–æ –ø—Ä–æ–¥–∞–≤—Ü—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞`);
        }

        // –ü–∞—Å–ø–æ—Ä—Ç –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
        function showPassportModal() {
            showModal('passportModal');
        }

        function savePassport() {
            const passportData = {
                series: document.getElementById('passportSeries').value,
                number: document.getElementById('passportNumber').value,
                issued: document.getElementById('passportIssued').value,
                code: document.getElementById('passportCode').value
            };
            
            if (!passportData.series || !passportData.number) {
                alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–µ—Ä–∏—é –∏ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞'); 
                return;
            }
            
            currentUser.passport = passportData;
            currentUser.passportConfirmed = false;
            saveData();
            closeModal('passportModal');
            loadProfile();
            alert('‚úÖ –ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã. –û–∂–∏–¥–∞–π—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º.');
        }

        function requestVerification() {
            if (!currentUser.passport) {
                alert('‚ùå –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ'); 
                return;
            }
            
            // –°–æ–∑–¥–∞–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
            verificationRequests.push({
                id: 'req_' + Date.now(),
                userId: currentUser.id,
                type: 'verification',
                status: 'pending',
                createdAt: new Date().toISOString(),
                userData: {
                    name: currentUser.name,
                    lastName: currentUser.lastName,
                    email: currentUser.email
                }
            });
            
            saveData();
            alert('üìã –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É');
        }

        // –ê–¥–º–∏–Ω —Ñ—É–Ω–∫—Ü–∏–∏
        function loadAdmin() {
            document.getElementById('adminTotalUsers').textContent = users.length;
            document.getElementById('adminVerifiedUsers').textContent = users.filter(u => u.verified).length;
            document.getElementById('adminTotalCards').textContent = users.reduce((sum, user) => sum + user.cards.length, 0);
            document.getElementById('adminTotalBalance').textContent = users.reduce((sum, user) => sum + user.balance, 0) + '‚ÇΩ';
        }

        function loadRequests() {
            const container = document.getElementById('requestsList');
            
            if (verificationRequests.length === 0) {
                container.innerHTML = '<div class="operation">–ó–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç</div>';
                return;
            }
            
            container.innerHTML = verificationRequests.map(req => {
                const user = users.find(u => u.id === req.userId);
                if (!user) return '';
                
                return `
                    <div class="request-item">
                        <div style="display: flex; justify-content: space-between; align-items: start;">
                            <div>
                                <strong>${user.name} ${user.lastName}</strong>
                                <div style="font-size: 12px; color: #666;">${user.email}</div>
                                <div style="font-size: 12px; color: #666;">–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é</div>
                            </div>
                            <div class="user-actions">
                                <button class="action-btn btn-success" onclick="approveRequest('${req.id}')">‚úÖ</button>
                                <button class="action-btn btn-danger" onclick="rejectRequest('${req.id}')">‚ùå</button>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function approveRequest(requestId) {
            const request = verificationRequests.find(r => r.id === requestId);
            if (!request) return;
            
            const user = users.find(u => u.id === request.userId);
            if (user) {
                user.verified = true;
                request.status = 'approved';
                saveData();
                loadRequests();
                alert(`‚úÖ ${user.name} –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω`);
            }
        }

        function rejectRequest(requestId) {
            const request = verificationRequests.find(r => r.id === requestId);
            if (request) {
                request.status = 'rejected';
                saveData();
                loadRequests();
                alert('‚ùå –ó–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω–µ–Ω');
            }
        }

        function loadUsersForPassport() {
            const select = document.getElementById('adminUserSelect');
            select.innerHTML = '<option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</option>';
            
            users.filter(user => user.role !== 'admin').forEach(user => {
                const option = document.createElement('option');
                option.value = user.id;
                option.textContent = `${user.name} ${user.lastName} (${user.email})`;
                select.appendChild(option);
            });
        }

        function adminSavePassport() {
            const userId = document.getElementById('adminUserSelect').value;
            const passportData = {
                series: document.getElementById('adminPassportSeries').value,
                number: document.getElementById('adminPassportNumber').value,
                issued: document.getElementById('adminPassportIssued').value,
                code: document.getElementById('adminPassportCode').value
            };
            
            if (!userId) {
                alert('‚ùå –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è');
                return;
            }
            
            if (!passportData.series || !passportData.number) {
                alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Å–µ—Ä–∏—é –∏ –Ω–æ–º–µ—Ä –ø–∞—Å–ø–æ—Ä—Ç–∞'); 
                return;
            }
            
            const user = users.find(u => u.id === userId);
            if (user) {
                user.passport = passportData;
                user.passportConfirmed = true;
                saveData();
                closeModal('passportAdminModal');
                alert(`‚úÖ –ü–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è ${user.name}`);
            }
        }

        // –ü—Ä–æ–º–æ–∫–æ–¥—ã
        function loadPromos() {
            const container = document.getElementById('promosList');
            if (!currentUser.activePromos || currentUser.activePromos.length === 0) {
                container.innerHTML = '<div class="operation">–ê–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –Ω–µ—Ç</div>';
                return;
            }
            
            container.innerHTML = currentUser.activePromos.map(promoId => {
                const promo = promoCodes.find(p => p.id === promoId);
                if (!promo) return '';
                return `
                    <div class="promo-card">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>${promo.name}</strong>
                                <div style="font-size: 12px; color: #666;">–ö–æ–¥: ${promo.code}</div>
                            </div>
                            <span class="badge badge-success">+${promo.amount}‚ÇΩ</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function activatePromo() {
            const code = document.getElementById('promoCode').value.toUpperCase();
            const promo = promoCodes.find(p => p.code === code);
            
            if (!promo) {
                alert('‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω'); 
                return;
            }
            
            if (promo.usedCount >= promo.maxUses) {
                alert('‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑'); 
                return;
            }
            
            if (new Date(promo.expiresAt) < new Date()) {
                alert('‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω'); 
                return;
            }
            
            if (currentUser.activePromos && currentUser.activePromos.includes(promo.id)) {
                alert('‚ùå –í—ã —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∏ —ç—Ç–æ—Ç –ø—Ä–æ–º–æ–∫–æ–¥'); 
                return;
            }
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø—Ä–æ–º–æ–∫–æ–¥
            currentUser.balance += promo.amount;
            if (!currentUser.activePromos) currentUser.activePromos = [];
            currentUser.activePromos.push(promo.id);
            promo.usedCount++;
            
            operations.push({
                id: 'op_' + Date.now(), 
                type: 'promo',
                userId: currentUser.id, 
                amount: promo.amount,
                description: `–ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–æ–º–æ–∫–æ–¥–∞: ${promo.name}`,
                at: new Date().toISOString()
            });
            
            saveData();
            updateUI();
            document.getElementById('promoCode').value = '';
            loadPromos();
            alert(`üéâ –ü—Ä–æ–º–æ–∫–æ–¥ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω! +${promo.amount} ‚ÇΩ –∑–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ —Å—á–µ—Ç`);
        }

        function createPromo() {
            const name = document.getElementById('promoName').value;
            const code = document.getElementById('promoCodeInput').value.toUpperCase();
            const amount = Number(document.getElementById('promoAmount').value);
            const maxUses = Number(document.getElementById('promoUses').value);
            const expiresAt = document.getElementById('promoExpires').value;
            
            if (!name || !code || !amount || !maxUses || !expiresAt) {
                alert('‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è'); 
                return;
            }
            
            if (promoCodes.find(p => p.code === code)) {
                alert('‚ùå –ü—Ä–æ–º–æ–∫–æ–¥ —Å —Ç–∞–∫–∏–º –∫–æ–¥–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'); 
                return;
            }
            
            const newPromo = {
                id: 'promo_' + Date.now(),
                code: code,
                name: name,
                amount: amount,
                maxUses: maxUses,
                usedCount: 0,
                expiresAt: expiresAt,
                createdBy: currentUser.id,
                createdAt: new Date().toISOString()
            };
            
            promoCodes.push(newPromo);
            saveData();
            closeModal('promoModal');
            alert('‚úÖ –ü—Ä–æ–º–æ–∫–æ–¥ —Å–æ–∑–¥–∞–Ω!');
        }

        function loadUsersList() {
            const container = document.getElementById('usersList');
            container.innerHTML = users.map(user => `
                <div class="user-item">
                    <div>
                        <strong>${user.name} ${user.lastName}</strong>
                        <div style="font-size: 12px; color: #666;">${user.email}</div>
                        <div>–ë–∞–ª–∞–Ω—Å: ${user.balance} ‚ÇΩ</div>
                        <div>–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è: ${user.verified ? '‚úÖ' : '‚ùå'}</div>
                        <div>–ü–∞—Å–ø–æ—Ä—Ç: ${user.passport ? '‚úÖ' : '‚ùå'}</div>
                    </div>
                    <div class="user-actions">
                        ${!user.verified ? `<button class="action-btn btn-success" onclick="verifyUser('${user.id}')">‚úÖ</button>` : ''}
                        ${user.role !== 'admin' ? `<button class="action-btn btn-warning" onclick="makeAdmin('${user.id}')">üëë</button>` : ''}
                    </div>
                </div>
            `).join('');
        }

        function verifyUser(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                user.verified = true;
                saveData();
                loadUsersList();
                alert(`‚úÖ ${user.name} –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω`);
            }
        }

        function makeAdmin(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                user.role = 'admin';
                saveData();
                loadUsersList();
                alert(`üëë ${user.name} —Ç–µ–ø–µ—Ä—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä`);
            }
        }

        function resetDB() {
            if (confirm('‚ö†Ô∏è –í—ã —É–≤–µ—Ä–µ–Ω—ã? –≠—Ç–æ —É–¥–∞–ª–∏—Ç –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –æ–ø–µ—Ä–∞—Ü–∏–∏!')) {
                localStorage.clear();
                location.reload();
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö
        function loadDashboard() {
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–Ω–Ω–µ—Ä –µ—Å–ª–∏ –Ω–µ—Ç –∫–∞—Ä—Ç
            const noCardBanner = document.getElementById('noCardBanner');
            if (currentUser.cards.length === 0) {
                noCardBanner.classList.remove('hidden');
            } else {
                noCardBanner.classList.add('hidden');
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç
            const cardsContainer = document.getElementById('cardsList');
            if (currentUser.cards.length === 0) {
                cardsContainer.innerHTML = '<div class="operation">–ö–∞—Ä—Ç –ø–æ–∫–∞ –Ω–µ—Ç</div>';
            } else {
                cardsContainer.innerHTML = currentUser.cards.map(card => `
                    <div class="operation">
                        <div>
                            <strong>${card.type}</strong>
                            <div style="font-size: 12px; color: #666;">${card.number}</div>
                        </div>
                        <span class="badge ${card.tier === 'premium' ? 'badge-premium' : ''}">
                            ${card.tier === 'premium' ? 'PREMIUM' : 'STANDARD'}
                        </span>
                    </div>
                `).join('');
            }
            
            // –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–π
            const userOps = operations.filter(op => 
                op.userId === currentUser.id || op.fromId === currentUser.id
            ).slice(-3).reverse();
            
            const container = document.getElementById('recentOperations');
            container.innerHTML = userOps.length ? userOps.map(op => `
                <div class="operation">
                    <div>${op.description}</div>
                    <div style="color: ${op.amount > 0 ? '#10b981' : '#ef4444'}; font-weight: 600;">
                        ${op.amount > 0 ? '+' : ''}${op.amount} ‚ÇΩ
                    </div>
                </div>
            `).join('') : '<div class="operation">–û–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>';
        }

        function loadHistory() {
            const userOps = operations.filter(op => 
                op.userId === currentUser.id || op.fromId === currentUser.id
            ).reverse();
            
            document.getElementById('operationsList').innerHTML = userOps.length ? 
                userOps.map(op => `
                    <div class="operation">
                        <div>${op.description}</div>
                        <div style="color: ${op.amount > 0 ? '#10b981' : '#ef4444'}; font-weight: 600;">
                            ${op.amount > 0 ? '+' : ''}${op.amount} ‚ÇΩ
                        </div>
                    </div>
                `).join('') : '<div class="operation">–û–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>';
        }

        function loadProfile() {
            document.getElementById('profileInfo').innerHTML = `
                <div class="operation">
                    <div><strong>–ò–º—è:</strong> ${currentUser.name} ${currentUser.lastName}</div>
                </div>
                <div class="operation">
                    <div><strong>Email:</strong> ${currentUser.email}</div>
                </div>
                <div class="operation">
                    <div><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${currentUser.phone}</div>
                </div>
                <div class="operation">
                    <div><strong>–ë–∞–ª–∞–Ω—Å:</strong> ${currentUser.balance} ‚ÇΩ</div>
                </div>
                <div class="operation">
                    <div><strong>–í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è:</strong> ${currentUser.verified ? '‚úÖ –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω' : '‚ùå –ù–µ –≤–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω'}</div>
                </div>
                <div class="operation">
                    <div><strong>–ü–∞—Å–ø–æ—Ä—Ç:</strong> ${currentUser.passport ? 
                        (currentUser.passportConfirmed ? '‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω' : '‚è≥ –û–∂–∏–¥–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è') : 
                        '‚ùå –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω'}</div>
                </div>
            `;
            
            document.getElementById('verifyBtn').style.display = 
                currentUser.verified ? 'none' : 'block';
        }

        function updateUI() {
            if (currentUser) {
                document.getElementById('userWelcome').textContent = `–ü—Ä–∏–≤–µ—Ç, ${currentUser.name}!`;
                document.getElementById('userBalance').textContent = `${currentUser.balance} ‚ÇΩ`;
                
                if (currentUser.role === 'admin') {
                    document.getElementById('adminNav').style.display = 'block';
                } else {
                    document.getElementById('adminNav').style.display = 'none';
                }
            }
        }

        function logout() {
            currentUser = null;
            showView('login');
        }

        // –ó–∞–ø—É—Å–∫
        showView('login');
    </script>
</body>
</html>
